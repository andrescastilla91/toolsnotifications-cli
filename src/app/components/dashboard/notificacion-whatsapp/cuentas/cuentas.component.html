<nav aria-label="breadcrumb">
  <ol class="breadcrumb mb-1">
    <li class="breadcrumb-item"><a href="#">Home</a></li>
    <li class="breadcrumb-item"><a href="#">Library</a></li>
    <li class="breadcrumb-item active" aria-current="page">Data</li>
  </ol>
</nav>

<div class="card">
  <div class="card-header bg-transparent border-bottom-0 d-flex justify-content-between align-items-center ">
    <div class="d-none d-md-block">
      <button (click)="onBtnNuevaCuenta()" type="button" class="btn btn-outline-info">
        <i class="bi bi-plus-circle pe-2"></i> Nuevo Cuenta
      </button>
    </div>
    <span class="card-title fs-5 my-2 my-md-0 ">Cuentas de WhatsApp</span>
  </div>
  <hr class="m-0 mx-2" >
  <div class="card-body d-flex justify-content-center align-items-center" style="min-height: 300px;" *ngIf="!listCuentasWhatsapp.length && btnFormulario.btnCrear.estado">
    <button (click)="onBtnNuevaCuenta()" type="button" class="btn btn-outline-info p-4">
      <i class="bi bi-plus-circle pe-2"></i> Nueva Cuenta
    </button>
  </div>
  <div class="card-body" *ngIf="!btnFormulario.btnCrear.estado">
    <form class="row" [formGroup]="formCuentasWhatsapp">
      <div class="col-12 col-md-12 col-lg-6 mb-2">
        <div class="form-floating">
          <input type="text" class="form-control"
            [ngClass]="_validaFormularioService.getInputStatus(this.formControl, 'razon_social')" id="razon_social"
            formControlName="razon_social" placeholder="">
          <label for="razon_social">Razon Social</label>
        </div>
      </div>
      <div class="col-12 col-md-12 col-lg-6 mb-2">
        <div class="form-floating">
          <input type="text" [ngClass]="_validaFormularioService.getInputStatus(this.formControl, 'direccion')"
            class="form-control" id="direccion" formControlName="direccion" placeholder="">
          <label for="direccion">Dirección Comercial</label>
        </div>
      </div>
      <div class="col-12 col-md-12 col-lg-6 mb-2">
        <div class="form-floating">
          <input type="file" [ngClass]="_validaFormularioService.getInputStatus(this.formControl, 'logo')"
            class="form-control" id="logo" formControlName="logo" placeholder="" accept="image/png, image/jpeg">
          <label for="logo">Logo</label>
        </div>
      </div>
      <div class="col-12 col-md-12 col-lg-6 mb-2">
        <label for="usuario">Numero de Cuenta</label>
        <div class="input-group mb-3">
          <span class="input-group-text dropdown-toggle" data-bs-toggle="dropdown">+{{indicativoBase}}</span>
          <ul class="dropdown-menu">
            <li *ngFor="let op of _paisesService.getLlistIndicativosPaises">
              <button (click)="indicativoBase = op.codigo" class="dropdown-item"> +{{op.codigo}} - {{op.titulo}} </button>
            </li>
          </ul>
          <input type="text" [ngClass]="_validaFormularioService.getInputStatus(this.formControl, 'usuario')"
            class="form-control" id="usuario" formControlName="usuario" placeholder="">
        </div>
      </div>
      <div class="d-flex gap-2 justify-content-end w-100">
        <button *ngIf="btnFormulario.btnGuardar.estado" (click)="postRegistroCuentaWhatsapp()" type="button"
          class="btn btn-outline-primary">Guardar</button>
        <button *ngIf="btnFormulario.btnCancelar.estado" (click)="onBtnCancelar()" type="button"
          class="btn btn-outline-danger">Cancelar</button>
      </div>
    </form>
  </div>
  <div class="card-body" *ngIf="listCuentasWhatsapp.length && btnFormulario.btnCrear.estado">
    <div class="d-flex gap-2 justify-content-end w-100 mb-2 d-md-none">
      <button (click)="onBtnNuevaCuenta()" type="button" class="btn btn-outline-info">
        <i class="bi bi-plus-circle pe-2"></i> Nuevo Cuenta
      </button>
    </div>
    <mat-accordion>
      <mat-expansion-panel *ngFor="let cuenta of listCuentasWhatsapp" >
        <mat-expansion-panel-header>
          <mat-panel-title>
            Cuenta: {{cuenta.usuario}}
          </mat-panel-title>
          <mat-panel-description class="text-capitalize d-flex justify-content-md-between justify-content-end">
            <span class="d-none d-md-block" >{{cuenta.razon_social}}</span>
            <i [matTooltip]="cuenta.estado? 'Activo' : '' " [ngClass]="cuenta.estado? 'bi bi-check2-all text-primary' : 'bi bi-x-circle text-danger'"  style="font-size: 32px;"></i>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="card m-2">
          <div class="row g-0">
            <div class="col-md-4">
              <img src="./../../../../../assets/images/default-image.jpg" class="img-fluid rounded-start" alt="...">
            </div>
            <div class="col-md-8  ">
              <div class="card-body" style="height: 80%;">
                <h2 class="card-title">Nombre de Empresa: <span class="text-capitalize" >{{cuenta.razon_social}}</span> </h2>
                <p class="card-text"><strong>Dirección: </strong> {{cuenta.direccion}} </p>
                <p class="card-text"><strong>Numero de Cuenta: </strong> {{cuenta.usuario}} </p>
              </div>
              <div class="card-footer bg-transparent d-flex justify-content-between align-items-center ">
                <p class="card-text m-0"><small class="text-muted"> <strong>Cuenta Iniciada Desde: </strong> {{cuenta.createdAt | date}}</small></p>
                <div class="d-grid gap-2 d-flex" >
                  <button matTooltip="Editar Cuenta" type="button" class="btn btn-outline-info p-1">
                    <i class="bi bi-pencil-square"></i>
                  </button>
                  <button *ngIf="!cuenta.estado" matTooltip="Activar Cuenta" type="button" class="btn btn-outline-secondary p-1">
                    <i class="bi bi-check-square"></i>
                  </button>
                  <button *ngIf="cuenta.estado" matTooltip="Inactivar Cuenta" type="button" class="btn btn-outline-secondary p-1">
                    <i class="bi bi-ban"></i>
                  </button>
                  <button matTooltip="Eliminar Cuenta" type="button" class="btn btn-outline-danger p-1">
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>